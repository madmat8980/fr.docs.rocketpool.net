(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{369:function(t,e,a){t.exports=a.p+"assets/img/nimbus-dashboard.6fc8e23b.png"},487:function(t,e,a){t.exports=a.p+"assets/img/grafana-login.f6ae2164.png"},488:function(t,e,a){t.exports=a.p+"assets/img/grafana-import.daca3097.png"},489:function(t,e,a){t.exports=a.p+"assets/img/grafana-import2.f2b09146.png"},490:function(t,e,a){t.exports=a.p+"assets/img/tooltip.f13b819e.png"},491:function(t,e,a){t.exports=a.p+"assets/img/cpu-temp.a96d5758.png"},492:function(t,e,a){t.exports=a.p+"assets/img/grafana-autocomplete.f6e59695.png"},493:function(t,e,a){t.exports=a.p+"assets/img/grafana-contact-points.6d59f887.png"},494:function(t,e,a){t.exports=a.p+"assets/img/grafana-new-contact-point.47dd3c24.png"},628:function(t,e,a){"use strict";a.r(e);var o=a(13),s=Object(o.a)({},(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"setting-up-the-grafana-dashboard"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-the-grafana-dashboard"}},[t._v("#")]),t._v(" Setting up the Grafana Dashboard")]),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),o("p",[t._v("The Smartnode metrics and dashboard are still "),o("strong",[t._v("experimental")]),t._v(".\nIf you encounter issues while setting them up using the guides below, please report them to the Rocket Pool team on the official Discord server.")]),t._v(" "),o("p",[t._v("Also, note that the Smartnode's metrics collector and Grafana dashboard are "),o("em",[t._v("entirely optional")]),t._v(".\nYou do not need to set them up to successfully run the Smartnode stack.")])]),t._v(" "),o("p",[t._v("Now that you have your node up and running, you'll probably want to have a convenient way to monitor everything about it at a glance to make sure it's functioning correctly (and what kind of earnings it's generating for you).")]),t._v(" "),o("p",[t._v("There are many tools out there that do this job.\nOne of the most popular is called "),o("a",{attrs:{href:"https://grafana.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana"),o("OutboundLink")],1),t._v(" - an easy-to-use, general-purpose dashboard system that you can access with a browser.")]),t._v(" "),o("p",[t._v("Rocket Pool comes out-of-the-box with support for Grafana and its dependencies; it even comes with a pre-built dashboard for each of the Consensus (ETH2) clients.\nFor example, here is a snapshot of what the dashboard for Nimbus looks like:")]),t._v(" "),o("p",[o("img",{attrs:{src:a(369),alt:""}})]),t._v(" "),o("p",[t._v("The pre-built dashboard was based on many rounds of feedback from the Rocket Pool community during the beta tests and the final Prater testnet.\nIt includes the following information all in a convenient format:")]),t._v(" "),o("ul",[o("li",[o("strong",[t._v("Top left:")]),t._v(" some important statistics about your machine's health and performance, and any pending system updates")]),t._v(" "),o("li",[o("strong",[t._v("Top right:")]),t._v(" the activity and performance of your validators on the Beacon Chain")]),t._v(" "),o("li",[o("strong",[t._v("Bottom left:")]),t._v(" details about the entire Rocket Pool network, for reference")]),t._v(" "),o("li",[o("strong",[t._v("Bottom right:")]),t._v(" details about your staking rewards, both ETH and RPL")])]),t._v(" "),o("p",[t._v("In this guide, we'll show you how to enable Rocket Pool's metrics system so you can use this dashboard - or even build your own!")]),t._v(" "),o("h2",{attrs:{id:"overview-of-the-rocket-pool-metrics-stack"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#overview-of-the-rocket-pool-metrics-stack"}},[t._v("#")]),t._v(" Overview of the Rocket Pool Metrics Stack")]),t._v(" "),o("p",[t._v("Starting with Smartnode v1.0.0-RC6, the Smartnode comes with an optional supplement to the traditional stack.\nIt uses the following capabilities:")]),t._v(" "),o("ul",[o("li",[o("a",{attrs:{href:"https://prometheus.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Prometheus"),o("OutboundLink")],1),t._v(" - a data collection, storage, and reporting system that captures all of the metrics you see above (any many more) and stores them, so they can be looked at over time")]),t._v(" "),o("li",[t._v("The Prometheus "),o("a",{attrs:{href:"https://github.com/prometheus/node_exporter",target:"_blank",rel:"noopener noreferrer"}},[t._v("Node Exporter"),o("OutboundLink")],1),t._v(" - a service that collects information about your machine's health (such as CPU usage, RAM usage, free disk space and swap space, etc.) and reports it to Prometheus")]),t._v(" "),o("li",[t._v("Grafana, the tool that exposes Prometheus's data through a convenient website hosted on your node")]),t._v(" "),o("li",[t._v("An optional custom set of scripts that will report any available Operating System updates to Prometheus, so you know if your system needs to be patched")])]),t._v(" "),o("p",[t._v("The default configuration will create Docker containers with all of these services that live alongside the rest of the Smartnode's Docker containers.\nIt will open up a port on your node machine for Grafana, so you can access its dashboard from any machine on your local network with a browser.")]),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),o("p",[t._v("This guide assumes you don't have a Prometheus and Grafana setup already in use, and need to create one from scratch.\nIf you already have an existing setup, you can derive the necessary information for attaching the relevant metrics to your Prometheus instance using the Native mode guides below.")])]),t._v(" "),o("h2",{attrs:{id:"enabling-the-metrics-server"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#enabling-the-metrics-server"}},[t._v("#")]),t._v(" Enabling the Metrics Server")]),t._v(" "),o("Tabs",{attrs:{type:"border-card"}},[o("Tab",{attrs:{label:"Setup for Docker Mode"}},[o("p",[t._v("Enabling metrics in Docker mode is the easiest of all.")]),t._v(" "),o("p",[t._v("Start by running the Smartnode configuration command again:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("rocketpool service config\n")])])]),o("p",[t._v("You will see the following question at the end:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("Would you like to enable Rocket Pool's metrics dashboard? [y/n]\n")])])]),o("p",[t._v("Enter "),o("code",[t._v("y")]),t._v(", to enable the Prometheus, Node Exporter, and Grafana Docker containers for you.\nIt will also modify your Consensus (ETH2) and Validator clients so they expose their own metrics to Prometheus.")]),t._v(" "),o("p",[t._v("For those who prefer to fine-tune their port settings, the interview will ask you if you'd like to change any of the ports used for the above services.\nNote that all of these ports are restricted to Docker's internal network with the exception of the Grafana port - that will be opened on your machine (so you can access it via a browser from other machines, such as your desktop or phone) so you may want to change that if the default port conflicts with something you already have.")]),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),o("p",[t._v("If you have UFW enabled as referenced in the "),o("RouterLink",{attrs:{to:"/guides/node/securing-your-node.html"}},[t._v("Securing your Node")]),t._v(" section, you will need to open a few ports in order for outside machines to access Grafana, and to allow local connections between the Node Exporter and Prometheus.")],1),t._v(" "),o("p",[t._v("First run:")]),t._v(" "),o("div",{staticClass:"language-shell extra-class"},[o("pre",{pre:!0,attrs:{class:"language-shell"}},[o("code",[o("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" inspect rocketpool_monitor-net "),o("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("grep")]),t._v(" -Po "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(?<='),o("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v("Subnet"),o("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(": "),o("span",{pre:!0,attrs:{class:"token entity",title:'\\"'}},[t._v('\\"')]),t._v(')[0-9./]+"')]),t._v("\n")])])]),o("p",[t._v("This will return an ip in CIDR notation that looks like "),o("code",[t._v("172.23.0.0/16")]),t._v(".")]),t._v(" "),o("p",[t._v("Then run the following, but replace "),o("code",[t._v("172.23.0.0/16")]),t._v(" with the output of the previous command:")]),t._v(" "),o("div",{staticClass:"language-shell extra-class"},[o("pre",{pre:!0,attrs:{class:"language-shell"}},[o("code",[o("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" ufw allow from "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.23")]),t._v(".0.0/16 to any port "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("9103")]),t._v(" comment "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Allow prometheus access to node-exporter"')]),t._v("\n")])])]),o("p",[t._v("You can then open the firewall to allow external devices access to your Grafana dashboard.")]),t._v(" "),o("Tabs",{attrs:{type:"border-card"}},[o("Tab",{attrs:{label:"Local Network"}},[o("p",[t._v("Use this if you want to access Grafana from any machine inside your local network, but deny access everywhere else.\nThis will be the most common use case.")]),t._v(" "),o("p",[t._v("Please check whether your local network uses the "),o("code",[t._v("192.168.1.xxx")]),t._v(" structure first.\nYou may have to change the command below to match your local network's configuration if it uses a different address structure (e.g. "),o("code",[t._v("192.168.99.xxx")]),t._v(").")]),t._v(" "),o("div",{staticClass:"language-shell extra-class"},[o("pre",{pre:!0,attrs:{class:"language-shell"}},[o("code",[o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# This assumes your local IP structure is 192.168.1.xxx")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" ufw allow from "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.0/24 proto tcp to any port "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("3100")]),t._v(" comment "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Allow grafana from local network'")]),t._v("\n")])])])]),t._v(" "),o("Tab",{attrs:{label:"Local Subnet"}},[o("p",[t._v("Use this if your Rocket Pool node is not connected to the same subnet as the device from which you are viewing Grafana. This may happen when your node is connected directly to your ISP's modem and the device you use to view Grafana is connected to a secondary router.")]),t._v(" "),o("p",[t._v("Please check whether your local network uses the "),o("code",[t._v("192.168.1.xxx")]),t._v(" structure first.\nYou may have to change the command below to match your local network's configuration if it uses a different address structure (e.g. "),o("code",[t._v("192.168.99.xxx")]),t._v(").")]),t._v(" "),o("div",{staticClass:"language-shell extra-class"},[o("pre",{pre:!0,attrs:{class:"language-shell"}},[o("code",[o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# To allow any devices in the broader subnet")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# for example allowing 192.168.2.20 to access")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# grafana on 192.168.1.20")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" ufw allow from "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".1.0/16 proto tcp to any port "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("3100")]),t._v(" comment "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Allow grafana from local subnets'")]),t._v("\n")])])])]),t._v(" "),o("Tab",{attrs:{label:"Anywhere"}},[o("p",[t._v("This will let you access Grafana from anywhere.\nIf you want to access it from outside your local network, you will still need to forward the Grafana port (default 3100) in your router settings.")]),t._v(" "),o("div",{staticClass:"language-shell extra-class"},[o("pre",{pre:!0,attrs:{class:"language-shell"}},[o("code",[o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Allow any IP to connect to Grafana")]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token function"}},[t._v("sudo")]),t._v(" ufw allow "),o("span",{pre:!0,attrs:{class:"token number"}},[t._v("3100")]),t._v("/tcp comment "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Allow grafana from anywhere'")]),t._v("\n")])])])])],1)],1),t._v(" "),o("p",[t._v("After you reconfigure the Smartnode to enable / disable metrics, you'll have to run the following commands for the changes to take effect:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("rocketpool service stop\n\nrocketpool service start\n")])])]),o("p",[t._v("The Operating System and Rocket Pool update tracker is "),o("strong",[t._v("not installed by default")]),t._v(" for maximum flexibility, but the process is simple.\nIf you would like to install it so your dashboard shows you how many updates are available for your system, you can do it with this command:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("rocketpool service install-update-tracker\n")])])]),o("p",[t._v("Under the hood, this will install a service that hooks into your Operating System's package manager, periodically checks for updates, and sends that information to Prometheus.\nThis service is different for every Operating System, but it has been confirmed to work on the following:")]),t._v(" "),o("ul",[o("li",[t._v("Ubuntu 20.04+")]),t._v(" "),o("li",[t._v("Debian 9 and 10")]),t._v(" "),o("li",[t._v("CentOS 7 and 8")]),t._v(" "),o("li",[t._v("Fedora 34")])]),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),o("p",[t._v("Enabling the service automatically is incompatible with SELinux.\nIf your system has SELinux enabled by default (as is the case with CentOS and Fedora), the installation command will get you "),o("em",[t._v("most of the way there")]),t._v(" but will also give you instructions on how to finish the process manually at the end.")])]),t._v(" "),o("p",[t._v("During this check, it will also compare your installed Rocket Pool Smartnode version with the latest release, and inform you if there's a new release available.")]),t._v(" "),o("p",[t._v("If you enabled the update tracker, then the last step is to restart the Node Exporter with the following command:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("docker restart rocketpool_exporter\n")])])]),o("p",[t._v("After that, you should be all set.")])]),t._v(" "),o("Tab",{attrs:{label:"Setup for Hybrid Mode"}},[o("p",[o("em",[t._v("Coming soon!")])])]),t._v(" "),o("Tab",{attrs:{label:"Setup for Native Mode"}},[o("p",[o("em",[t._v("Coming soon!")])])])],1),t._v(" "),o("h2",{attrs:{id:"setting-up-grafana"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#setting-up-grafana"}},[t._v("#")]),t._v(" Setting up Grafana")]),t._v(" "),o("p",[t._v("Now that the metrics server is ready, you can access it with any browser on your local network.")]),t._v(" "),o("p",[t._v("Refer to the tabs below for your Smartnode installation mode.")]),t._v(" "),o("Tabs",{attrs:{type:"border-card"}},[o("Tab",{attrs:{label:"Setup for Docker Mode"}},[o("p",[t._v("Navigate to the following URL, substituting the variables with your setup as necessary:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("http://<your node IP>:<grafana port>\n")])])]),o("p",[t._v("For example, if you node's IP was "),o("code",[t._v("192.168.1.5")]),t._v(" and you used the default Grafana port of "),o("code",[t._v("3100")]),t._v(", then you would go to this URL in your browser:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("http://192.168.1.5:3100\n")])])]),o("p",[t._v("You will see a login screen like this:")]),t._v(" "),o("p",[o("img",{attrs:{src:a(487),alt:""}})]),t._v(" "),o("p",[t._v("The default Grafana information is:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("Username: admin\nPassword: admin\n")])])]),o("p",[t._v("You will then be prompted to change the default password for the "),o("code",[t._v("admin")]),t._v(" account.\nPick something strong and don't forget it!")]),t._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("Tip")]),t._v(" "),o("p",[t._v("If you lose the admin password, you can reset it using the following command on your node:")]),t._v(" "),o("div",{staticClass:"language-shell extra-class"},[o("pre",{pre:!0,attrs:{class:"language-shell"}},[o("code",[o("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" -it rocketpool_grafana grafana-cli admin reset-admin-password admin\n")])])]),o("p",[t._v("You will be able to log into Grafana using the default "),o("code",[t._v("admin")]),t._v(" credentials once again, and then you will be prompted to change the password for the "),o("code",[t._v("admin")]),t._v(" account.")])]),t._v(" "),o("p",[t._v("Thanks to community member "),o("strong",[t._v("tedsteen")]),t._v("'s work, Grafana will automatically connect to your Prometheus instance so it has access to the metrics that it collects.\nAll you need to do is grab the dashboard!")])]),t._v(" "),o("Tab",{attrs:{label:"Setup for Hybrid Mode"}},[o("p",[o("em",[t._v("Coming soon!")])])]),t._v(" "),o("Tab",{attrs:{label:"Setup for Native Mode"}},[o("p",[o("em",[t._v("Coming soon!")])])])],1),t._v(" "),o("h2",{attrs:{id:"importing-the-rocket-pool-dashboard"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#importing-the-rocket-pool-dashboard"}},[t._v("#")]),t._v(" Importing the Rocket Pool Dashboard")]),t._v(" "),o("p",[t._v("Now that you have Grafana attached to Prometheus, you can import the standard dashboard (or build your own using the metrics that it provides, if you are familiar with that process).")]),t._v(" "),o("p",[t._v("Start by going to the "),o("strong",[t._v("Create")]),t._v(" menu (the plus icon on the right-side bar) and click on "),o("strong",[t._v("Import")]),t._v(":")]),t._v(" "),o("p",[o("img",{attrs:{src:a(488),alt:""}})]),t._v(" "),o("p",[t._v("When prompted for the URL, select the option from the below list based on which Consensus (ETH2) client you are using:")]),t._v(" "),o("ul",[o("li",[t._v("Lighthouse: "),o("a",{attrs:{href:"https://grafana.com/grafana/dashboards/14883",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://grafana.com/grafana/dashboards/14883"),o("OutboundLink")],1)]),t._v(" "),o("li",[t._v("Nimbus: "),o("a",{attrs:{href:"https://grafana.com/grafana/dashboards/14884",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://grafana.com/grafana/dashboards/14884"),o("OutboundLink")],1)]),t._v(" "),o("li",[t._v("Prysm: "),o("a",{attrs:{href:"https://grafana.com/grafana/dashboards/14885",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://grafana.com/grafana/dashboards/14885"),o("OutboundLink")],1)]),t._v(" "),o("li",[t._v("Teku: "),o("a",{attrs:{href:"https://grafana.com/grafana/dashboards/14886",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://grafana.com/grafana/dashboards/14886"),o("OutboundLink")],1)])]),t._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("Tip")]),t._v(" "),o("p",[t._v("If you don't remember which client you have, you can check quickly by running "),o("code",[t._v("rocketpool service version")]),t._v(" on your node.")])]),t._v(" "),o("p",[t._v("Enter one of the URLs above into the "),o("strong",[t._v("Import via grafana.com")]),t._v(" box and press the "),o("strong",[t._v("Load")]),t._v(" button.\nYou will be prompted with some information about the dashboard here, such as its name and where you'd like to store it (the default "),o("strong",[t._v("General")]),t._v(" folder is fine unless you use a lot of dashboards and want to organize them).")]),t._v(" "),o("p",[t._v("Under the "),o("strong",[t._v("Prometheus")]),t._v(" drop-down at the bottom, you should only have a single option labeled "),o("strong",[t._v("Prometheus (default)")]),t._v(".\nSelect this option.")]),t._v(" "),o("p",[t._v("Your screen should look like this (using Lighthouse as an example):")]),t._v(" "),o("p",[o("img",{attrs:{src:a(489),alt:""}})]),t._v(" "),o("p",[t._v("If yours matches, click the "),o("strong",[t._v("Import")]),t._v(" button and you will be immediately taken to your new dashboard.")]),t._v(" "),o("p",[t._v("At first glance, you should see lots of information about your node and your validators.\nEach box comes with a handy tooltip on the top left corner (the "),o("code",[t._v("i")]),t._v(" icon) that you can hover over to learn more about it.\nFor example, here is the tooltip for the "),o("strong",[t._v("Your Validator Share")]),t._v(" box:")]),t._v(" "),o("p",[o("img",{attrs:{src:a(490),alt:""}})]),t._v(" "),o("p",[t._v("However, we aren't done setting things up yet - there is still a little more configuration to do.")]),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),o("p",[t._v("Some of the boxes (notably the APR ones) calculate their values by comparing today's value with yesterday's value.\nUntil the metrics server has been running for more than a day, these will say "),o("strong",[t._v("N/A")]),t._v(" or "),o("strong",[t._v("No data")]),t._v(".")]),t._v(" "),o("p",[t._v("This is normal!")]),t._v(" "),o("p",[t._v("Just wait a day until it has enough data to calculate its values correctly.")])]),t._v(" "),o("h2",{attrs:{id:"tailoring-the-hardware-monitor-to-your-system"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#tailoring-the-hardware-monitor-to-your-system"}},[t._v("#")]),t._v(" Tailoring the Hardware Monitor to your System")]),t._v(" "),o("p",[t._v("Now that the dashboard is up, you might notice that a few boxes are empty such as "),o("strong",[t._v("SSD Latency")]),t._v(" and "),o("strong",[t._v("Network Usage")]),t._v(".\nWe have to tailor the dashboard to your specific hardware so it knows how to capture these things.")]),t._v(" "),o("h3",{attrs:{id:"cpu-temp"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#cpu-temp"}},[t._v("#")]),t._v(" CPU Temp")]),t._v(" "),o("p",[t._v("To update your CPU temperature gauge, click the title of the "),o("strong",[t._v("CPU Temp")]),t._v(" box and select "),o("strong",[t._v("Edit")]),t._v(" from the drop down.\nYour screen will now look something like this:")]),t._v(" "),o("p",[o("img",{attrs:{src:a(491),alt:""}})]),t._v(" "),o("p",[t._v("This is Grafana's edit mode, where you can change what is displayed and how it looks.\nWe're interested in the query box highlighted in red, to the right of the "),o("strong",[t._v("Metrics browser")]),t._v(" button.")]),t._v(" "),o("p",[t._v("By default, that box has this in it:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v('node_hwmon_temp_celsius{job="node", chip="", sensor=""}\n')])])]),o("p",[t._v("There are two fields in this text that are currently blank: "),o("code",[t._v("chip")]),t._v(" and "),o("code",[t._v("sensor")]),t._v(".\nThese are unique to each machine, so you'll have to fill them in based on what your machine provides.")]),t._v(" "),o("p",[t._v("To do this, follow these steps:")]),t._v(" "),o("ol",[o("li",[t._v("Remove the "),o("code",[t._v(', sensor=""')]),t._v(" portion so it ends with "),o("code",[t._v('chip=""}')]),t._v(". For clarity, the whole thing should now be "),o("code",[t._v('node_hwmon_temp_celsius{job="node", chip=""}')]),t._v(".")]),t._v(" "),o("li",[t._v("Put your cursor in-between the quote marks of "),o("code",[t._v('chip=""')]),t._v(" and press "),o("code",[t._v("Ctrl+Spacebar")]),t._v(". This will bring up an auto-complete box with the available options, which looks like this:")])]),t._v(" "),o("p",[o("img",{attrs:{src:a(492),alt:""}})]),t._v(" "),o("ol",{attrs:{start:"3"}},[o("li",[t._v("Select the option that corresponds to your system's CPU.")]),t._v(" "),o("li",[t._v("Once that's selected, add "),o("code",[t._v(', sensor=""')]),t._v(" back into the string. Place your cursor in-between the quote marks of "),o("code",[t._v('sensor=""')]),t._v(" and press "),o("code",[t._v("Ctrl+Spacebar")]),t._v(" to get another auto-complete menu. Select the sensor you want to monitor.")])]),t._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("Tip")]),t._v(" "),o("p",[t._v("If you don't know which "),o("code",[t._v("chip")]),t._v(" or "),o("code",[t._v("sensor")]),t._v(" is correct, you'll have to try all of them until you find the one that looks right. To help with this, install the "),o("code",[t._v("lm-sensors")]),t._v(" package (for example, "),o("code",[t._v("sudo apt install lm-sensors")]),t._v(" on Debian / Ubuntu) and run the "),o("code",[t._v("sensors -u")]),t._v(" command to provide what sensors your computer has. You can try to correlate a chip ID from Grafana's list with what you see here based on their names and IDs.")]),t._v(" "),o("p",[t._v("For example, this is one of the outputs of our "),o("code",[t._v("sensors -u")]),t._v(" command:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("k10temp-pci-00c3\nTctl:\n  temp1_input: 33.500\nTdie:\n  temp2_input: 33.500\n")])])]),o("p",[t._v("In our case, the corresponding chip in Grafana is "),o("code",[t._v("pci0000:00_0000:00:18_3")]),t._v(" and the corresponding sensor is "),o("code",[t._v("temp1")]),t._v(".")])]),t._v(" "),o("p",[t._v("Once you're happy with your selections, click the blue "),o("strong",[t._v("Apply")]),t._v(" button in the top right corner of the screen to save the settings.")]),t._v(" "),o("div",{staticClass:"custom-block warning"},[o("p",{staticClass:"custom-block-title"},[t._v("NOTE")]),t._v(" "),o("p",[t._v("Not all system expose CPU temperature info - notably virtual machines or cloud-based systems.\nIf yours doesn't have anything in the auto-complete field for "),o("code",[t._v("chip")]),t._v(", this is probably the case and you won't be able to monitor your CPU temperature.")])]),t._v(" "),o("h3",{attrs:{id:"ssd-latency"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#ssd-latency"}},[t._v("#")]),t._v(" SSD Latency")]),t._v(" "),o("p",[t._v("The "),o("strong",[t._v("SSD Latency")]),t._v(" chart tracks how long it takes for read/write operations to take.\nThis is helpful in gauging how fast your SSD is, so you know if it becomes a bottleneck if your validator suffers from poor performance.\nTo update the SSD you want to track in the chart, click on the "),o("strong",[t._v("SSD Latency")]),t._v(" title and select "),o("strong",[t._v("Edit")]),t._v(".")]),t._v(" "),o("p",[t._v("This chart has two query fields (two textboxes) with four "),o("code",[t._v('device=""')]),t._v(" portions in total.\nYou'll need to update all four of these fields with the device you want to track.")]),t._v(" "),o("p",[t._v("Simply place your cursor in-between the quote marks and press "),o("code",[t._v("Ctrl+Spacebar")]),t._v(" to get Grafana's auto-complete list, and select the correct option from there for each of the "),o("code",[t._v('device=""')]),t._v(" portions.\n"),o("strong",[t._v("You want to start from the leftmost empty setting first, or the auto-complete list may not appear.")])]),t._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("Tip")]),t._v(" "),o("p",[t._v("If you don't know which device to track, run the following command:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("lsblk\n")])])]),o("p",[t._v("This will output a tree showing your device and partition list, for example:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("NAME        MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT\n...\nloop25        7:25   0   132K  1 loop /snap/gtk2-common-themes/9\nloop26        7:26   0  65,1M  1 loop /snap/gtk-common-themes/1515\nnvme0n1     259:0    0 238,5G  0 disk\n├─nvme0n1p1 259:1    0   512M  0 part /boot/efi\n├─nvme0n1p2 259:2    0 150,1G  0 part /\n├─nvme0n1p3 259:3    0  87,4G  0 part\n└─nvme0n1p4 259:4    0   527M  0 part\n")])])]),o("p",[t._v("If you didn't change Docker's default location to a different drive during your Smartnode installation, then the disk you want to track will be the one that your Operating System is installed on.\nLook in the "),o("code",[t._v("MOUNTPOINT")]),t._v(" column for an entry simply labeled "),o("code",[t._v("/")]),t._v(", then follow that back up to its parent device (the one with "),o("code",[t._v("disk")]),t._v(" in the "),o("code",[t._v("TYPE")]),t._v(" column).")]),t._v(" "),o("p",[t._v("Typically this will be "),o("code",[t._v("sda")]),t._v(" for SATA drives or "),o("code",[t._v("nvme0n1")]),t._v(" for NVMe drives.")]),t._v(" "),o("p",[t._v("If you "),o("em",[t._v("did")]),t._v(" change Docker's default location to a different drive, or if you're running a hybrid / native setup, you should be able to use the same technique of \"following the mount point\" to determine which device your chain data resides on.")])]),t._v(" "),o("p",[t._v("Once you're happy with your selections, click the blue "),o("strong",[t._v("Apply")]),t._v(" button in the top right corner of the screen to save the settings.")]),t._v(" "),o("h3",{attrs:{id:"network-usage"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#network-usage"}},[t._v("#")]),t._v(" Network Usage")]),t._v(" "),o("p",[t._v("This chart tracks how much data you're sending and receiving over a particular network connection.\nAs you might expect, the dashboard needs to know which network you want it to track.")]),t._v(" "),o("p",[t._v("To change it, click on the "),o("strong",[t._v("Network Usage")]),t._v(" title and select "),o("strong",[t._v("Edit")]),t._v(".")]),t._v(" "),o("p",[t._v("This chart has two query fields with two "),o("code",[t._v('device=""')]),t._v(" portions in total.\nYou'll need to update these with the network you want to track.")]),t._v(" "),o("p",[t._v("Place your cursor in-between the quote marks and press "),o("code",[t._v("Ctrl+Spacebar")]),t._v(" to get Grafana's auto-complete list, and select the correct option from there for each of the "),o("code",[t._v('device=""')]),t._v(" portions.")]),t._v(" "),o("div",{staticClass:"custom-block tip"},[o("p",{staticClass:"custom-block-title"},[t._v("Tip")]),t._v(" "),o("p",[t._v("If you don't know which device to track, run the following command:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("route\n")])])]),o("p",[t._v("The output will look something like this:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("Kernel IP routing table\nDestination     Gateway         Genmask         Flags Metric Ref    Use Iface\ndefault         192.168.1.1     0.0.0.0         UG    100    0        0 eth0\n192.168.1.0     0.0.0.0         255.255.255.0   U     0      0        0 eth0\n192.168.1.1     0.0.0.0         255.255.255.255 UH    100    0        0 eth0\n")])])]),o("p",[t._v("Look at the "),o("code",[t._v("Destination")]),t._v(" column for the row with the value if "),o("code",[t._v("default")]),t._v(".\nFollow that row all the way to the "),o("code",[t._v("Iface")]),t._v(" column.\nThe device listed there is the one you want to use - in this example, "),o("code",[t._v("eth0")]),t._v(".")])]),t._v(" "),o("p",[t._v("Once you're happy with your selections, click the blue "),o("strong",[t._v("Apply")]),t._v(" button in the top right corner of the screen to save the settings.")]),t._v(" "),o("h3",{attrs:{id:"total-net-i-o"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#total-net-i-o"}},[t._v("#")]),t._v(" Total Net I/O")]),t._v(" "),o("p",[t._v("This tracks the total amount of data you've sent and received.\nYou might find it useful to watch if, for example, your ISP limits you to a certain amount of data per month.")]),t._v(" "),o("p",[t._v("The setup is identical to the "),o("strong",[t._v("Network Usage")]),t._v(" box above, so simply follow those instructions for this box too.")]),t._v(" "),o("h3",{attrs:{id:"os-disk-space-used"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#os-disk-space-used"}},[t._v("#")]),t._v(" OS Disk Space Used")]),t._v(" "),o("p",[t._v("This keeps tabs on how full your Operating System disk is getting, so you know when it's time to clean up (and if your chain data lives on the same drive, time to "),o("RouterLink",{attrs:{to:"/guides/node/pruning.html"}},[t._v("prune Geth or Nethermind")]),t._v(").")],1),t._v(" "),o("p",[t._v("The steps are the same as the "),o("strong",[t._v("SSD Latency")]),t._v(" box above, so simply follow those instructions for this box too.\nAs a reminder, you want the drive that houses the partition which has "),o("code",[t._v("/")]),t._v(" in the "),o("code",[t._v("MOUNTPOINT")]),t._v(" column for this one because that will be your Operating System drive.")]),t._v(" "),o("h3",{attrs:{id:"disk-2-space-used"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#disk-2-space-used"}},[t._v("#")]),t._v(" Disk 2 Space Used")]),t._v(" "),o("p",[t._v("This is an optional field that tracks the free space of a second disk on your system.\nIt is aimed at people that keep their Operating System and chain data on separate drives, such as "),o("strong",[t._v("Raspberry Pi")]),t._v(" users.")]),t._v(" "),o("p",[t._v("Setting it up is the same as the "),o("strong",[t._v("SSD Latency")]),t._v(" box above, but instead of looking at which partition has "),o("code",[t._v("/")]),t._v(" in the "),o("code",[t._v("MOUNTPOINT")]),t._v(" column, you want to look for the one that has whatever your 2nd drive's mount point is.\nUse the disk associated with that partition.")]),t._v(" "),o("h2",{attrs:{id:"customizing-the-dashboard"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#customizing-the-dashboard"}},[t._v("#")]),t._v(" Customizing the Dashboard")]),t._v(" "),o("p",[t._v("While the standard dashboard tries to do a good job capturing everything you'd want to see at a glance, it's quite easy to customize a Grafana dashboard however you want.\nYou can add new graphs, change the way graphs look, move things around, and much more!")]),t._v(" "),o("p",[t._v("Take a look at "),o("a",{attrs:{href:"https://grafana.com/tutorials/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana's Tutorials"),o("OutboundLink")],1),t._v(" page to learn how to play with it and set it up to your liking.")]),t._v(" "),o("h2",{attrs:{id:"customizing-the-metrics-stack"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#customizing-the-metrics-stack"}},[t._v("#")]),t._v(" Customizing the Metrics Stack")]),t._v(" "),o("p",[t._v("The tools used in the Rocket Pool Metrics Stack offer a wide array of configuration options beyond what is included in the default Rocket Pool installation. This section includes configuration examples for different use cases.")]),t._v(" "),o("p",[t._v("In general, "),o("a",{attrs:{href:"https://grafana.com/docs/grafana/latest/administration/configuration/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana configuration options"),o("OutboundLink")],1),t._v(" should be passed through using environment variables in "),o("code",[t._v("override/grafana.yml")]),t._v(". Any config option can be converted to an environment variable using the following syntax:")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("GF_<SectionName>_<KeyName>\n")])])]),o("h3",{attrs:{id:"grafana-smtp-settings-for-sending-emails"}},[o("a",{staticClass:"header-anchor",attrs:{href:"#grafana-smtp-settings-for-sending-emails"}},[t._v("#")]),t._v(" Grafana SMTP Settings for Sending Emails")]),t._v(" "),o("p",[t._v("To send emails from Grafana, e.g. for alerts or to invite other users, SMTP settings need to be configured in the Rocket Pool Metrics Stack.\nSee the "),o("a",{attrs:{href:"https://grafana.com/docs/grafana/latest/administration/configuration/#smtp",target:"_blank",rel:"noopener noreferrer"}},[t._v("Grafana SMTP configuration"),o("OutboundLink")],1),t._v(" page for reference.")]),t._v(" "),o("p",[t._v("Open "),o("code",[t._v("~/.rocketpool/override/grafana.yml")]),t._v(" in a text editor.\nAdd an "),o("code",[t._v("environment")]),t._v(" section below the "),o("code",[t._v("x-rp-comment: Add your customizations below this line")]),t._v(" line, replacing the values below with those for your SMTP provider.\nIf using Gmail and "),o("a",{attrs:{href:"https://support.google.com/accounts/answer/185839",target:"_blank",rel:"noopener noreferrer"}},[t._v("2-Step Verification"),o("OutboundLink")],1),t._v(" is enabled, create an "),o("a",{attrs:{href:"https://support.google.com/mail/answer/185833?hl=en",target:"_blank",rel:"noopener noreferrer"}},[t._v("App Password"),o("OutboundLink")],1),t._v(" for this service.")]),t._v(" "),o("div",{staticClass:"language-yaml extra-class"},[o("pre",{pre:!0,attrs:{class:"language-yaml"}},[o("code",[o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),o("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3.7"')]),t._v("\n"),o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("grafana")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("x-rp-comment")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Add your customizations below this line\n    "),o("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## SMTP settings start, replace values with those of your SMTP provider")]),t._v("\n      "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GF_SMTP_ENABLED=true\n      "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GF_SMTP_HOST=mail.example.com"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("<port"),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")]),t._v("  "),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# Gmail users should use smtp.gmail.com:587")]),t._v("\n      "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GF_SMTP_USER=admin@example.com\n      "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GF_SMTP_PASSWORD=password\n      "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" GF_SMTP_FROM_ADDRESS=admin@example.com\n      "),o("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(' GF_SMTP_FROM_NAME="Rocketpool Grafana Admin"\n      '),o("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## SMTP server settings end")]),t._v("\n")])])]),o("p",[t._v("After making these modifications, "),o("strong",[t._v("run the following to apply the changes")]),t._v(":")]),t._v(" "),o("div",{staticClass:"language- extra-class"},[o("pre",{pre:!0,attrs:{class:"language-text"}},[o("code",[t._v("docker stop rocketpool_grafana\n\nrocketpool service start\n")])])]),o("p",[t._v("To test the SMTP settings, go to the "),o("strong",[t._v("Alerting")]),t._v(" menu and click "),o("strong",[t._v("Contact points")]),t._v(".")]),t._v(" "),o("center",[o("p",[o("img",{attrs:{src:a(493),alt:""}})])]),t._v(" "),o("p",[t._v("Click "),o("strong",[t._v("New contact point")]),t._v(" and select "),o("strong",[t._v("Email")]),t._v(" as the Contact point type.\nEnter an email address in the "),o("strong",[t._v("Addresses")]),t._v(" section and click "),o("strong",[t._v("Test")]),t._v(".")]),t._v(" "),o("center",[o("p",[o("img",{attrs:{src:a(494),alt:""}})])]),t._v(" "),o("p",[t._v("Check to see that the test email was received.\nClick "),o("strong",[t._v("Save contact point")]),t._v("* when finished.")])],1)}),[],!1,null,null,null);e.default=s.exports}}]);