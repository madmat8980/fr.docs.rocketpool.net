(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{378:function(e,t,o){e.exports=o.p+"assets/img/tui-ec-expose-ports.6c7bebc3.png"},379:function(e,t,o){e.exports=o.p+"assets/img/tui-cc-expose-ports.8709831e.png"},615:function(e,t,o){"use strict";o.r(t);var n=o(13),a=Object(n.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[n("h1",{attrs:{id:"advanced-smartnode-configuration-for-docker-mode"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#advanced-smartnode-configuration-for-docker-mode"}},[e._v("#")]),e._v(" Advanced Smartnode Configuration for Docker Mode")]),e._v(" "),n("p",[e._v("In this section, we will cover a few techniques that expand the Smartnode's customization and functionality.")]),e._v(" "),n("h2",{attrs:{id:"allowing-external-validator-clients-to-connect-to-the-smartnode"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#allowing-external-validator-clients-to-connect-to-the-smartnode"}},[e._v("#")]),e._v(" Allowing External Validator Clients to Connect to the Smartnode")]),e._v(" "),n("p",[e._v("Because the Smartnode manages the Execution client and Beacon Node, it handles much of their configuration (including updates) automatically.\nOne common request from users is for the ability to attach an externally-managed Validator client to the Smartnode's Execution and Consensus clients.")]),e._v(" "),n("p",[e._v("Essentially, this acts as a sort of "),n("strong",[e._v('"Reverse Hybrid" mode')]),e._v("; instead of the Smartnode managing its own Validator client and connecting to an external Execution and Consensus client, it manages all three things and an external Validator client can use its own clients instead.")]),e._v(" "),n("p",[e._v("Enabling this is trivial using the "),n("RouterLink",{attrs:{to:"/guides/node/config-docker.html#configuring-via-the-settings-manager"}},[e._v("Settings Manager")]),e._v(".")],1),e._v(" "),n("h3",{attrs:{id:"execution-client"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#execution-client"}},[e._v("#")]),e._v(" Execution Client")]),e._v(" "),n("p",[e._v("To enable access to the Execution client, go to the "),n("strong",[e._v("Execution Client (ETH1)")]),e._v(" category and check the "),n("strong",[e._v("Expose RPC Ports")]),e._v(" box:")]),e._v(" "),n("center",[n("p",[n("img",{attrs:{src:o(378),alt:""}})])]),e._v(" "),n("p",[e._v("This will open the RPC ports (default 8545 for HTTP and 8546 for Websockets) on your node, so other machines on your local network can connect to them.")]),e._v(" "),n("p",[e._v("For example, if your node's local IP address were "),n("code",[e._v("192.168.1.45")]),e._v(", then by enabling this option you could use "),n("code",[e._v("http://192.168.1.45:8545")]),e._v(" as the Execution client URL for your other services.")]),e._v(" "),n("h3",{attrs:{id:"beacon-node-consensus-client"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#beacon-node-consensus-client"}},[e._v("#")]),e._v(" Beacon Node (Consensus Client)")]),e._v(" "),n("p",[e._v("To enable access to the Consensus client's Beacon Node, go to the "),n("strong",[e._v("Consensus Client (ETH2)")]),e._v(" category and check the "),n("strong",[e._v("Expose API Port")]),e._v(" box:")]),e._v(" "),n("center",[n("p",[n("img",{attrs:{src:o(379),alt:""}})])]),e._v(" "),n("p",[e._v("This will open the HTTP API port (default 5052) on your node, so other machines on your local network can connect to it.")]),e._v(" "),n("p",[e._v("For example, if your node's local IP address were "),n("code",[e._v("192.168.1.45")]),e._v(", then by enabling this option you could use "),n("code",[e._v("http://192.168.1.45:5052")]),e._v(" as the Beacon Node URL for your other services.")]),e._v(" "),n("div",{staticClass:"custom-block warning"},[n("p",{staticClass:"custom-block-title"},[e._v("NOTE FOR PRYSM USERS")]),e._v(" "),n("p",[n("strong",[e._v("Prysm")]),e._v(" has a second box called "),n("code",[e._v("Expose RPC Port")]),e._v(" that must be checked if you want to attach an externally-managed Prysm Validator Client to your Beacon Node.\nThis is because Prysm's Validator Client cannot currently connect to a Beacon Node via the standard Beacon HTTP API.\nIn the future, this will be fixed and there will only be one checkbox like the other clients.")])]),e._v(" "),n("h2",{attrs:{id:"customizing-the-docker-compose-definition-files"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#customizing-the-docker-compose-definition-files"}},[e._v("#")]),e._v(" Customizing the Docker-Compose Definition Files")]),e._v(" "),n("p",[e._v("While the Settings Manager contains many options you can use to customize your node, it doesn't wrap all of the features that "),n("code",[e._v("docker-compose")]),e._v(" provides.\nSome users require supplemental customizations to the Smartnode's "),n("code",[e._v("docker-compose")]),e._v(" files.")]),e._v(" "),n("p",[e._v("Because the "),n("code",[e._v("docker-compose")]),e._v(" files are regenerated (into the "),n("code",[e._v("runtime")]),e._v(" directory) from their templates (in the "),n("code",[e._v("templates")]),e._v(" directory) each time "),n("code",[e._v("rocketpool service start")]),e._v(" is called, modifying the runtime files is not advised.\nInstead, we leverage "),n("code",[e._v("docker-compose")]),e._v("'s "),n("a",{attrs:{href:"https://docs.docker.com/compose/extends/#adding-and-overriding-configuration",target:"_blank",rel:"noopener noreferrer"}},[e._v("inherent override functionality"),n("OutboundLink")],1),e._v(" to let you make any modifications you need to which will be preserved upon restarts.\nFurthermore, this system "),n("em",[e._v("also")]),e._v(" "),n("strong",[e._v("preserves your modifications after an upgrade to or reinstallation of the Smartnode stack")]),e._v(".")]),e._v(" "),n("p",[e._v("To do this, simply open the file for the container of your choice in the "),n("code",[e._v("override")]),e._v(" folder, and add your customizations to it there.\nAnything you put in these files will "),n("strong",[e._v("override")]),e._v(" whatever the corresponding settings are in the "),n("code",[e._v("docker-compose")]),e._v(" files from the "),n("code",[e._v("runtime")]),e._v(" folder.")]),e._v(" "),n("p",[e._v("For example, say you wanted to "),n("a",{attrs:{href:"https://grafana.com/docs/grafana/latest/administration/configure-docker/#configure-aws-credentials-for-cloudwatch-support",target:"_blank",rel:"noopener noreferrer"}},[e._v("add AWS credentials to Grafana for CloudWatch support"),n("OutboundLink")],1),e._v(".\nYou could do it by modifying "),n("code",[e._v("override/grafana.yml")]),e._v(" like so:")]),e._v(" "),n("div",{staticClass:"language-yaml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Enter your own customizations for the Grafana container here. These changes will persist after upgrades, so you only need to do them once.")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# ")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# See https://docs.docker.com/compose/extends/#adding-and-overriding-configuration")]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# for more information on overriding specific parameters of docker-compose files.")]),e._v("\n\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("version")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[e._v('"3.7"')]),e._v("\n"),n("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("services")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n  "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("grafana")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("x-rp-comment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" Add your customizations below this line\n    "),n("span",{pre:!0,attrs:{class:"token key atrule"}},[e._v("environment")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" GF_AWS_PROFILES=default\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" GF_AWS_default_ACCESS_KEY_ID=YOUR_ACCESS_KEY\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" GF_AWS_default_SECRET_ACCESS_KEY=YOUR_SECRET_KEY\n      "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v(" GF_AWS_default_REGION=us"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),e._v("east"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("-")]),n("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("\n")])])]),n("p",[e._v("This will merge the four environment variables listed here to the existing array of environment variables in the Grafana container.\nFor more information on how "),n("code",[e._v("docker-compose")]),e._v(" overrides work, please visit "),n("a",{attrs:{href:"https://docs.docker.com/compose/extends/#adding-and-overriding-configuration",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://docs.docker.com/compose/extends/#adding-and-overriding-configuration"),n("OutboundLink")],1),e._v(".")])],1)}),[],!1,null,null,null);t.default=a.exports}}]);