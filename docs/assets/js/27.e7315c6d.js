(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{383:function(e,t,o){e.exports=o.p+"assets/img/status-fee-distributor.bf090849.png"},486:function(e,t,o){e.exports=o.p+"assets/img/sp-chart.ebd0a15c.png"},628:function(e,t,o){"use strict";o.r(t);var a=o(13),i=Object(a.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"fee-distributors-and-the-smoothing-pool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fee-distributors-and-the-smoothing-pool"}},[e._v("#")]),e._v(" Fee Distributors and the Smoothing Pool")]),e._v(" "),a("p",[e._v("Now that "),a("a",{attrs:{href:"https://ethereum.org/en/upgrades/merge/",target:"_blank",rel:"noopener noreferrer"}},[e._v("the Merge"),a("OutboundLink")],1),e._v(" has passed, node operators receive "),a("strong",[e._v("priority fees")]),e._v(" ("),a("strong",[e._v("tips")]),e._v(") from the transactions they include in any blocks that they propose to the Ethereum chain.\nThese fees come from and stay on the Execution layer.")]),e._v(" "),a("p",[e._v("Unlike most validation rewards which are locked on the Consensus layer (until withdrawals are enabled), these fees are "),a("em",[e._v("immediately liquid")]),e._v(".\nIn general, priority fees provide almost as much ETH to you as Beacon Chain rewards do, so they are a very nice benefit of the Merge.")]),e._v(" "),a("div",{staticClass:"custom-block tip"},[a("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),a("p",[e._v("As a quick reminder here's a breakdown of the different types of rewards and which layer they're provided on:")]),e._v(" "),a("ul",[a("li",[e._v("Consensus Layer (locked until withdrawals): attestations, block proposals, sync committees, slashing reports")]),e._v(" "),a("li",[e._v("Execution Layer (liquid): priority fees and MEV (discussed in the next section) from block proposals")])])]),e._v(" "),a("h2",{attrs:{id:"fee-recipients"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#fee-recipients"}},[e._v("#")]),e._v(" Fee Recipients")]),e._v(" "),a("p",[e._v("When you propose a block on the Ethereum chain, the protocol needs to know where to send the tips from each transaction included in your block.\nIt can't send them to your validator's address, because that's on the Consensus layer - not the Execution layer.\nIt can't send them to your minipool address, because it has to work for solo stakers too and solo stakers don't have an address on the Execution layer attached to their validators the way Rocket Pool does.")]),e._v(" "),a("p",[e._v("Instead, the way it works is fairly straightforward: when Rocket Pool starts up your Validator Client, it passes in an argument called the "),a("strong",[e._v("fee recipient")]),e._v(".\nThe fee recipient is simply an address on the Execution layer where you want the tips to go.")]),e._v(" "),a("p",[e._v("Rocket Pool is designed to fairly distribute these rewards between you and the rETH pool stakers, the same way it fairly distributes your Beacon chain rewards: half of any priority fees your minipool validators earn will go to you (plus the average commission of all of your minipools), and the other half will go to the pool stakers (minus your average commission).")]),e._v(" "),a("p",[e._v("To that end, the Smartnode will automatically set your node's "),a("code",[e._v("fee recipient")]),e._v(" to either of these special contracts:")]),e._v(" "),a("ul",[a("li",[e._v("Your node's own personal "),a("strong",[e._v("Fee Distributor")]),e._v(" (the default)")]),e._v(" "),a("li",[e._v("The "),a("strong",[e._v("Smoothing Pool")]),e._v(" (opt-in)")])]),e._v(" "),a("p",[e._v("In brief, the "),a("strong",[e._v("Fee Distributor")]),e._v(" is a unique contract attached to your node that collects and fairly splits your priority fees between you and the rETH stakers.\nIt's like your own personal vault for priority fees.\nAnyone (including you) can distribute its balance at any time to ensure that the rewards are always available to rETH stakers.")]),e._v(" "),a("p",[e._v("The "),a("strong",[e._v("Smoothing Pool")]),e._v(" is a special opt-in contract that allows all participating node operators to aggregate and pool their priority fees together, and distributes them evenly among the participants during each Rocket Pool rewards interval (currently every 28 days) and the rETH pool stakers.\nThis is a very compelling feature for node operators that don't want to worry about the luck factor involved in getting block proposals with high priority fees, and would rather have a nice, regular, consistent set of monthly earnings.")]),e._v(" "),a("p",[e._v("We'll cover both of these below so you understand the difference and whether or not you want to join the Smoothing Pool.")]),e._v(" "),a("h2",{attrs:{id:"your-fee-distributor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#your-fee-distributor"}},[e._v("#")]),e._v(" Your Fee Distributor")]),e._v(" "),a("p",[e._v("Your Fee Distributor is a unique contract on the Execution Layer that's "),a("strong",[e._v("specific to your node")]),e._v(".\nIt will hold all of the priority fees you've earned over time, and it contains the logic required to fairly split and distribute them to the rETH pool stakers and your withdrawal address.\nThis distribution process "),a("strong",[e._v("can be called by anyone")]),e._v(" (including rETH stakers), and can be done "),a("strong",[e._v("at any time")]),e._v(".\nIt does not have a time limit before rewards expire.")]),e._v(" "),a("p",[e._v("The address for your node's Fee Distributor is "),a("strong",[e._v("deterministically based on your node address")]),e._v(".\nThat means it is known ahead of time, before the Fee Distributor is even created.")]),e._v(" "),a("p",[e._v("New Rocket Pool nodes will automatically create (initialize) their node's Fee Distributor contract upon registration.\nNodes that were created before the Redstone upgrade will need to do this process manually.\nThis only needs to be run once.")]),e._v(" "),a("p",[e._v("One interesting ramification of this is that your Distributor's address may start accruing a balance "),a("strong",[e._v("before")]),e._v(" you've initialized your Fee Distributor contract.\nThis is okay, because your Distributor will gain access to all of this existing balance as soon as you initialize it.")]),e._v(" "),a("p",[a("strong",[e._v("By default, your node will use its Fee Distributor as the fee recipient for your validators.")])]),e._v(" "),a("h3",{attrs:{id:"viewing-its-address-and-balance"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#viewing-its-address-and-balance"}},[e._v("#")]),e._v(" Viewing its Address and Balance")]),e._v(" "),a("p",[e._v("You can view your fee distributor's address and balance as part of:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("rocketpool node status\n")])])]),a("p",[e._v("The output will look like this:")]),e._v(" "),a("center",[a("p",[a("img",{attrs:{src:o(383),alt:""}})])]),e._v(" "),a("h3",{attrs:{id:"initializing-the-fee-distributor"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#initializing-the-fee-distributor"}},[e._v("#")]),e._v(" Initializing the Fee Distributor")]),e._v(" "),a("p",[e._v("To initialize your node's distributor, simply run this new command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("rocketpool node initialize-fee-distributor\n")])])]),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("NOTE")]),e._v(" "),a("p",[e._v("If you created your node before the Redstone update, you must call this function once before you can create any new minipools with "),a("code",[e._v("rocketpool node deposit")]),e._v(".")])]),e._v(" "),a("p",[e._v("When your distributor has been initialized, you can claim and distribute its entire balance using the following command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("rocketpool node distribute-fees\n")])])]),a("p",[e._v("This will send your share of the rewards to your "),a("strong",[e._v("withdrawal address")]),e._v(".")]),e._v(" "),a("div",{staticClass:"custom-block warning"},[a("p",{staticClass:"custom-block-title"},[e._v("NOTE ON TAXABLE EVENTS")]),e._v(" "),a("p",[e._v("Whenever you create a new minipool, Rocket Pool will automatically call "),a("code",[e._v("distribute-fees")]),e._v(".\nThis is to ensure that whatever fees you had accumulated are distributed using your node's average commission, which could change when you create the new minipool.")]),e._v(" "),a("p",[e._v("Also, note that anyone can call "),a("code",[e._v("distribute-fees")]),e._v(" on your fee distributor (to prevent you from holding rETH rewards hostage).\nYou may have a taxable event whenever this method is called.")]),e._v(" "),a("p",[e._v("Please keep these conditions in mind when deciding whether or not to use the Smoothing Pool (discussed below).")])]),e._v(" "),a("h2",{attrs:{id:"the-smoothing-pool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-smoothing-pool"}},[e._v("#")]),e._v(" The Smoothing Pool")]),e._v(" "),a("p",[e._v("The "),a("strong",[e._v("Smoothing Pool")]),e._v(" is a unique opt-in feature of the Rocket Pool network that is available to our node operators.\nEssentially, it becomes the fee recipient for every node operator that opts into it and collectively accumulates the priority fees from blocks proposed by those node operators into one large pool. During a Rocket Pool rewards checkpoint (the same ones used to distribute RPL rewards), the total ETH balance of the pool is distributed fairly to the pool stakers and the node operators that opted into it.")]),e._v(" "),a("p",[e._v("In essence, the Smoothing Pool is a way to effectively eliminate the randomness associated with being selected for block proposals.\nIf you've ever had a streak of bad luck and gone months without a proposal, or if your block proposals only have low priority fees, you may find the Smoothing Pool quite exciting.")]),e._v(" "),a("p",[e._v("To make the math easy to understand, community member Ken Smith has put together a "),a("a",{attrs:{href:"https://raw.githubusercontent.com/htimsk/SPanalysis/main/report/Analysis%20of%20the%20Smoothing%20Pool.pdf",target:"_blank",rel:"noopener noreferrer"}},[e._v("massive analysis"),a("OutboundLink")],1),e._v(" comparing the profitability of the Smoothing Pool and the Fee Distributor, which is summarized nicely with this chart:")]),e._v(" "),a("center",[a("p",[a("img",{attrs:{src:o(486),alt:""}})])]),e._v(" "),a("p",[e._v("In short, as long as the Smoothing Pool has more minipools than you do, it's more likely that you'll come out ahead by joining it. You can view how many nodes and minipools are opted in using community member Peteris's excellent "),a("a",{attrs:{href:"https://rocketscan.io/smoothingpool",target:"_blank",rel:"noopener noreferrer"}},[e._v("Rocketscan website"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"the-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-rules"}},[e._v("#")]),e._v(" The Rules")]),e._v(" "),a("p",[e._v("The Smoothing Pool uses the following rules:")]),e._v(" "),a("ul",[a("li",[a("p",[e._v("During a Rocket Pool rewards checkpoint when the Smoothing Pool's balance is distributed, the contract's total ETH balance is split in two.")]),e._v(" "),a("ul",[a("li",[e._v("rETH stakers receive half, minus the "),a("strong",[e._v("average commission")]),e._v(" of all opted-in node operators.")]),e._v(" "),a("li",[e._v("The remainder goes to the node operators that opted in.")])])]),e._v(" "),a("li",[a("p",[e._v("Opting into the Smoothing Pool is done on a "),a("strong",[e._v("node level")]),e._v(". If you opt in, all of your minipools are opted in.")])]),e._v(" "),a("li",[a("p",[e._v("Anyone can opt in at any time. They must wait a full rewards interval (3 days on Prater, 28 days on Mainnet) before opting out to prevent gaming the system.")]),e._v(" "),a("ul",[a("li",[e._v("Once opted out, they must wait another full interval to opt back in.")])])]),e._v(" "),a("li",[a("p",[e._v('The Smoothing Pool calculates the "share" of each minipool (portion of the pool\'s ETH for the interval) owned by each node opted in.')]),e._v(" "),a("ul",[a("li",[e._v("The share is a function of your minipool's performance during the interval (calculated by looking at how many attestations you sent on the Beacon Chain, and how many you missed), and your minipool's commission rate.")])])]),e._v(" "),a("li",[a("p",[e._v("Your node's total share is the sum of your minipool shares.")])]),e._v(" "),a("li",[a("p",[e._v("Your node's total share is scaled by the amount of time you were opted in.")]),e._v(" "),a("ul",[a("li",[e._v("If you were opted in for the full interval, you receive your full share.")]),e._v(" "),a("li",[e._v("If you were opted in for 30% of an interval, you receive 30% of your full share.")])])])]),e._v(" "),a("p",[e._v("If you are interested in the complete technical details of Smoothing Pool rewards calculation, please review the "),a("a",{attrs:{href:"https://github.com/rocket-pool/rocketpool-research/blob/master/Merkle%20Rewards%20System/rewards-calculation-spec.md#smoothing-pool-rewards",target:"_blank",rel:"noopener noreferrer"}},[e._v("full specification here"),a("OutboundLink")],1),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"joining-and-leaving-the-smoothing-pool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#joining-and-leaving-the-smoothing-pool"}},[e._v("#")]),e._v(" Joining and Leaving the Smoothing Pool")]),e._v(" "),a("p",[e._v("To opt into the Smoothing Pool, run the following command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("rocketpool node join-smoothing-pool\n")])])]),a("p",[e._v("This will record you as opted-in in the Rocket Pool contracts and automatically change your Validator Client's "),a("code",[e._v("fee recipient")]),e._v(" from your node's distributor contract to the Smoothing Pool contract.")]),e._v(" "),a("p",[e._v("To leave the pool, run this command:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("rocketpool node leave-smoothing-pool\n")])])]),a("p",[e._v("This will record you as opted-out in the Rocket Pool contracts, and once a small delay has passed, will automatically change your Validator Client's "),a("code",[e._v("fee recipient")]),e._v(" from the Smoothing Pool contract back to your node's Fee Distributor contract.")]),e._v(" "),a("h3",{attrs:{id:"claiming-rewards-from-the-smoothing-pool"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#claiming-rewards-from-the-smoothing-pool"}},[e._v("#")]),e._v(" Claiming Rewards from the Smoothing Pool")]),e._v(" "),a("p",[e._v("Rewards from the Smoothing Pool are bundled together with RPL at the end of each rewards interval using the Redstone rewards system.\nClaiming them is as simple as running:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("rocketpool node claim-rewards\n")])])]),a("p",[e._v("If opted into the Smoothing Pool, you will notice that the amount of ETH you receive for each interval is more than zero:")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("Welcome to the new rewards system!\nYou no longer need to claim rewards at each interval - you can simply let them accumulate and claim them whenever you want.\nHere you can see which intervals you haven't claimed yet, and how many rewards you earned during each one.\n\nRewards for Interval 0 (2022-08-04 01:35:39 -0400 EDT to 2022-09-01 01:35:39 -0400 EDT):\n\tStaking:        50.820133 RPL\n\tSmoothing Pool: 0.000000 ETH\n\nRewards for Interval 1 (2022-09-01 01:35:39 -0400 EDT to 2022-09-29 01:35:39 -0400 EDT):\n\tStaking:        40.668885 RPL\n\tSmoothing Pool: 0.096200 ETH\n\nTotal Pending Rewards:\n\t91.489018 RPL\n\t0.096200 ETH\n\nWhich intervals would you like to claim? Use a comma separated list (such as '1,2,3') or leave it blank to claim all intervals at once.\n")])])]),a("p",[e._v("Note that the Smoothing Pool rewards in Interval 1 here indicate that the node was opted in during that interval and received rewards accordingly.")]),e._v(" "),a("p",[e._v("We'll cover more about claiming RPL and Smoothing Pool rewards later in the guide, in the "),a("RouterLink",{attrs:{to:"/guides/node/rewards.html"}},[e._v("Claiming Rewards")]),e._v(" section.")],1),e._v(" "),a("h2",{attrs:{id:"next-steps"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#next-steps"}},[e._v("#")]),e._v(" Next Steps")]),e._v(" "),a("p",[e._v("Once you've decided on whether or not you want to join the Smoothing Pool, take a look at the next section on MEV and MEV rewards.")])],1)}),[],!1,null,null,null);t.default=i.exports}}]);