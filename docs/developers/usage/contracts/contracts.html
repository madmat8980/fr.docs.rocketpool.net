<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Smart Contracts | Rocket Pool</title>
    <meta name="generator" content="VuePress 1.9.8">
    
    <meta name="description" content="Rocket Pool Documentation - Decentralised ETH2 Proof of Stake Protocol">
    <meta name="theme-color" content="#e57147">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/assets/css/0.styles.90c665f5.css" as="style"><link rel="preload" href="/assets/js/app.77a1a73f.js" as="script"><link rel="preload" href="/assets/js/3.59e072af.js" as="script"><link rel="preload" href="/assets/js/94.6cf1cf9d.js" as="script"><link rel="prefetch" href="/assets/js/1.621421f4.js"><link rel="prefetch" href="/assets/js/10.0beeb760.js"><link rel="prefetch" href="/assets/js/100.88cdfdbd.js"><link rel="prefetch" href="/assets/js/101.0834ca19.js"><link rel="prefetch" href="/assets/js/102.e32cb0d3.js"><link rel="prefetch" href="/assets/js/103.e43de303.js"><link rel="prefetch" href="/assets/js/104.929317e0.js"><link rel="prefetch" href="/assets/js/105.08563b83.js"><link rel="prefetch" href="/assets/js/106.9624fd50.js"><link rel="prefetch" href="/assets/js/107.f9035c9d.js"><link rel="prefetch" href="/assets/js/108.6e8f42a3.js"><link rel="prefetch" href="/assets/js/109.9b0fc002.js"><link rel="prefetch" href="/assets/js/11.7bd4d14f.js"><link rel="prefetch" href="/assets/js/110.ca86ea3c.js"><link rel="prefetch" href="/assets/js/111.1ef47e8e.js"><link rel="prefetch" href="/assets/js/112.3d2cac3b.js"><link rel="prefetch" href="/assets/js/113.833fb190.js"><link rel="prefetch" href="/assets/js/114.592ba644.js"><link rel="prefetch" href="/assets/js/115.1bee6024.js"><link rel="prefetch" href="/assets/js/116.3b81f41d.js"><link rel="prefetch" href="/assets/js/117.8bad1c57.js"><link rel="prefetch" href="/assets/js/118.bc205b8b.js"><link rel="prefetch" href="/assets/js/119.f9cc32b2.js"><link rel="prefetch" href="/assets/js/12.5b723ff8.js"><link rel="prefetch" href="/assets/js/120.74f8dc58.js"><link rel="prefetch" href="/assets/js/121.86d83b5c.js"><link rel="prefetch" href="/assets/js/122.d4023124.js"><link rel="prefetch" href="/assets/js/123.f3371c33.js"><link rel="prefetch" href="/assets/js/124.c850eeea.js"><link rel="prefetch" href="/assets/js/125.db3c64ff.js"><link rel="prefetch" href="/assets/js/126.e86cd6bc.js"><link rel="prefetch" href="/assets/js/13.16e9e9b9.js"><link rel="prefetch" href="/assets/js/14.44fde8be.js"><link rel="prefetch" href="/assets/js/15.8f0dc889.js"><link rel="prefetch" href="/assets/js/16.9c08e0f3.js"><link rel="prefetch" href="/assets/js/17.4c4ccea4.js"><link rel="prefetch" href="/assets/js/18.7d1bdf32.js"><link rel="prefetch" href="/assets/js/19.bf6a399a.js"><link rel="prefetch" href="/assets/js/20.77c3acb5.js"><link rel="prefetch" href="/assets/js/21.ea7cb626.js"><link rel="prefetch" href="/assets/js/22.a77bc8ac.js"><link rel="prefetch" href="/assets/js/23.dd1d5b49.js"><link rel="prefetch" href="/assets/js/24.dc269e8e.js"><link rel="prefetch" href="/assets/js/25.be52baee.js"><link rel="prefetch" href="/assets/js/26.d63c478c.js"><link rel="prefetch" href="/assets/js/27.5e091fa4.js"><link rel="prefetch" href="/assets/js/28.71b07522.js"><link rel="prefetch" href="/assets/js/29.b5b16c0d.js"><link rel="prefetch" href="/assets/js/30.edd676cd.js"><link rel="prefetch" href="/assets/js/31.3aeabd45.js"><link rel="prefetch" href="/assets/js/32.b045bf2e.js"><link rel="prefetch" href="/assets/js/33.a63fc435.js"><link rel="prefetch" href="/assets/js/34.2d67d907.js"><link rel="prefetch" href="/assets/js/35.ffe2929d.js"><link rel="prefetch" href="/assets/js/36.278b96aa.js"><link rel="prefetch" href="/assets/js/37.a219276f.js"><link rel="prefetch" href="/assets/js/38.1b6aa20d.js"><link rel="prefetch" href="/assets/js/39.843b6115.js"><link rel="prefetch" href="/assets/js/4.ef6f61b1.js"><link rel="prefetch" href="/assets/js/40.44e4c249.js"><link rel="prefetch" href="/assets/js/41.3492c5f5.js"><link rel="prefetch" href="/assets/js/42.76d8ad23.js"><link rel="prefetch" href="/assets/js/43.c95eaff3.js"><link rel="prefetch" href="/assets/js/44.17b1aa47.js"><link rel="prefetch" href="/assets/js/45.250014b6.js"><link rel="prefetch" href="/assets/js/46.be457e3e.js"><link rel="prefetch" href="/assets/js/47.57b4cb16.js"><link rel="prefetch" href="/assets/js/48.5d7a0121.js"><link rel="prefetch" href="/assets/js/49.e66c6ae6.js"><link rel="prefetch" href="/assets/js/5.80c7221e.js"><link rel="prefetch" href="/assets/js/50.9f530e52.js"><link rel="prefetch" href="/assets/js/51.5a06cb70.js"><link rel="prefetch" href="/assets/js/52.725d4253.js"><link rel="prefetch" href="/assets/js/53.ae200b56.js"><link rel="prefetch" href="/assets/js/54.46b98b49.js"><link rel="prefetch" href="/assets/js/55.04d71e6f.js"><link rel="prefetch" href="/assets/js/56.60027d34.js"><link rel="prefetch" href="/assets/js/57.01278462.js"><link rel="prefetch" href="/assets/js/58.f63a1cfd.js"><link rel="prefetch" href="/assets/js/59.a5ce05cd.js"><link rel="prefetch" href="/assets/js/6.872f0834.js"><link rel="prefetch" href="/assets/js/60.f8bb3e23.js"><link rel="prefetch" href="/assets/js/61.d0656379.js"><link rel="prefetch" href="/assets/js/62.706de3ca.js"><link rel="prefetch" href="/assets/js/63.42a94f65.js"><link rel="prefetch" href="/assets/js/64.a81d4082.js"><link rel="prefetch" href="/assets/js/65.ec53f4eb.js"><link rel="prefetch" href="/assets/js/66.43e3f4d2.js"><link rel="prefetch" href="/assets/js/67.a177ba71.js"><link rel="prefetch" href="/assets/js/68.62832b62.js"><link rel="prefetch" href="/assets/js/69.174f8e4d.js"><link rel="prefetch" href="/assets/js/7.9b65285b.js"><link rel="prefetch" href="/assets/js/70.62da706e.js"><link rel="prefetch" href="/assets/js/71.23743965.js"><link rel="prefetch" href="/assets/js/72.9992b3ca.js"><link rel="prefetch" href="/assets/js/73.28689a6b.js"><link rel="prefetch" href="/assets/js/74.ece21287.js"><link rel="prefetch" href="/assets/js/75.7da512f2.js"><link rel="prefetch" href="/assets/js/76.0196383e.js"><link rel="prefetch" href="/assets/js/77.61fe48cd.js"><link rel="prefetch" href="/assets/js/78.4ab3eaa8.js"><link rel="prefetch" href="/assets/js/79.87ed6320.js"><link rel="prefetch" href="/assets/js/8.b98d8fe7.js"><link rel="prefetch" href="/assets/js/80.dd3a0e15.js"><link rel="prefetch" href="/assets/js/81.f9ffba60.js"><link rel="prefetch" href="/assets/js/82.036ab644.js"><link rel="prefetch" href="/assets/js/83.7c2c66b0.js"><link rel="prefetch" href="/assets/js/84.19c19e0e.js"><link rel="prefetch" href="/assets/js/85.5ad2325a.js"><link rel="prefetch" href="/assets/js/86.e50f49d5.js"><link rel="prefetch" href="/assets/js/87.d5f41356.js"><link rel="prefetch" href="/assets/js/88.d9742d2f.js"><link rel="prefetch" href="/assets/js/89.f421b63c.js"><link rel="prefetch" href="/assets/js/9.79a13fee.js"><link rel="prefetch" href="/assets/js/90.1a3c51a7.js"><link rel="prefetch" href="/assets/js/91.fb6f62e9.js"><link rel="prefetch" href="/assets/js/92.311d2f05.js"><link rel="prefetch" href="/assets/js/93.572afcf1.js"><link rel="prefetch" href="/assets/js/95.af296af8.js"><link rel="prefetch" href="/assets/js/96.7d7983ed.js"><link rel="prefetch" href="/assets/js/97.e7d1c3ec.js"><link rel="prefetch" href="/assets/js/98.366fc7e7.js"><link rel="prefetch" href="/assets/js/99.4c96d047.js">
    <link rel="stylesheet" href="/assets/css/0.styles.90c665f5.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/images/logo-small.png" alt="Rocket Pool" class="logo"> <span class="site-name can-hide">Rocket Pool</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/guides/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/developers/" class="nav-link router-link-active">
  For Developers
</a></div><div class="nav-item"><a href="https://www.rocketpool.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.com/invite/rocketpool" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/rocket-pool/docs.rocketpool.net" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/overview/" class="nav-link">
  Overview
</a></div><div class="nav-item"><a href="/guides/" class="nav-link">
  Guides
</a></div><div class="nav-item"><a href="/developers/" class="nav-link router-link-active">
  For Developers
</a></div><div class="nav-item"><a href="https://www.rocketpool.net" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Website
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://discord.com/invite/rocketpool" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Discord
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/rocket-pool/docs.rocketpool.net" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>For Developers</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/developers/" aria-current="page" class="sidebar-link">Developer Documentation</a></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Integration Usage and Examples</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/developers/usage/contracts/contracts.html" aria-current="page" class="active sidebar-link">Smart Contracts</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developers/usage/contracts/contracts.html#introduction" class="sidebar-link">Introduction</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developers/usage/contracts/contracts.html#contract-design" class="sidebar-link">Contract Design</a></li><li class="sidebar-sub-header"><a href="/developers/usage/contracts/contracts.html#interacting-with-rocket-pool" class="sidebar-link">Interacting With Rocket Pool</a></li></ul></li><li class="sidebar-sub-header"><a href="/developers/usage/contracts/contracts.html#deposits" class="sidebar-link">Deposits</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/developers/usage/contracts/contracts.html#implementation" class="sidebar-link">Implementation</a></li></ul></li></ul></li><li><a href="/developers/usage/go/go.html" class="sidebar-link">[WIP] Go Library</a></li><li><a href="/developers/usage/js/js.html" class="sidebar-link">Javascript</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>API Reference</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="smart-contracts"><a href="#smart-contracts" class="header-anchor">#</a> Smart Contracts</h1> <h2 id="introduction"><a href="#introduction" class="header-anchor">#</a> Introduction</h2> <p>The Rocket Pool <a href="https://www.ethereum.org/learn/#smart-contracts" target="_blank" rel="noopener noreferrer">Smart Contracts<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> form the foundation of the Rocket Pool protocol. They are the base layer of infrastructure which all other elements of the network are built on top of, including the JavaScript library, the Smart Node software stack, and all web or application interfaces.</p> <p>Direct interaction with the contracts is usually not necessary, and is facilitated through the use of other software (such as the JavaScript library). This section provides a detailed description of the contract design, and information on how to build on top of Rocket Pool for developers wishing to extend it. All code examples are given as Solidity <code>v0.7.6</code>.</p> <h3 id="contract-design"><a href="#contract-design" class="header-anchor">#</a> Contract Design</h3> <p>The Rocket Pool network contracts are built with upgradability in mind, using a hub-and-spoke architecture. The central hub of the network is the <code>RocketStorage</code> contract, which is responsible for storing the state of the entire protocol. This is implemented through the use of maps for key-value storage, and getter and setter methods for reading and writing values for a key.</p> <p>The <code>RocketStorage</code> contract also stores the addresses of all other network contracts (keyed by name), and restricts data modification to those contracts only. Using this architecture, the protocol can be upgraded by deploying new versions of an existing contract, and updating its address in storage. This gives Rocket Pool the flexibility required to fix bugs or implement new features to improve the protocol.</p> <h3 id="interacting-with-rocket-pool"><a href="#interacting-with-rocket-pool" class="header-anchor">#</a> Interacting With Rocket Pool</h3> <p>To begin interacting with the Rocket Pool network, first create an instance of the <code>RocketStorage</code> contract using its <a href="https://github.com/rocket-pool/rocketpool/blob/master/contracts/interface/RocketStorageInterface.sol" target="_blank" rel="noopener noreferrer">interface<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>:</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">import</span> <span class="token string">&quot;RocketStorageInterface.sol&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>

    RocketStorageInterface rocketStorage <span class="token operator">=</span> <span class="token function">RocketStorageInterface</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token builtin">address</span> _rocketStorageAddress<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        rocketStorage <span class="token operator">=</span> <span class="token function">RocketStorageInterface</span><span class="token punctuation">(</span>_rocketStorageAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>The above constructor should be called with the address of the <code>RocketStorage</code> contract on the appropriate network.</p> <p>Because of Rocket Pool's architecture, the addresses of other contracts should not be used directly but retrieved from the blockchain before use. Network upgrades may have occurred since the previous interaction, resulting in outdated addresses. <code>RocketStorage</code> can never change address, so it is safe to store a reference to it.</p> <p>Other contract instances can be created using the appropriate interface taken from the <a href="https://github.com/rocket-pool/rocketpool/tree/master/contracts/interface" target="_blank" rel="noopener noreferrer">Rocket Pool repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, e.g.:</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">import</span> <span class="token string">&quot;RocketStorageInterface.sol&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;RocketDepositPoolInterface.sol&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>

    RocketStorageInterface rocketStorage <span class="token operator">=</span> <span class="token function">RocketStorageInterface</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token builtin">address</span> _rocketStorageAddress<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token comment">// It is safe to store reference to RocketStorage</span>
        rocketStorage <span class="token operator">=</span> <span class="token function">RocketStorageInterface</span><span class="token punctuation">(</span>_rocketStorageAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">exampleMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        <span class="token comment">// All other contracts should be queried each time they are used</span>
        <span class="token builtin">address</span> rocketDepositPoolAddress <span class="token operator">=</span> rocketStorage<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token function">keccak256</span><span class="token punctuation">(</span>abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span><span class="token string">&quot;contract.address&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rocketDepositPool&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        RocketDepositPoolInterface rocketDepositPool <span class="token operator">=</span> <span class="token function">RocketDepositPoolInterface</span><span class="token punctuation">(</span>rocketDepositPoolAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>The Rocket Pool contracts, as defined in <code>RocketStorage</code>, are:</p> <ul><li><code>rocketVault</code> - Stores ETH held by network contracts (internal, not upgradeable)</li> <li><code>rocketAuctionManager</code> - Handles the auctioning of RPL slashed from node operators' stake</li> <li><code>rocketDepositPool</code> - Accepts user-deposited ETH and handles assignment to minipools</li> <li><code>rocketMinipoolManager</code> - Creates &amp; manages all minipools in the network</li> <li><code>rocketMinipoolQueue</code> - Organises minipools into a queue for ETH assignment</li> <li><code>rocketMinipoolStatus</code> - Handles minipool status updates from watchtower nodes</li> <li><code>rocketMinipoolPenalty</code> - Stores penalties applied to node operators by the oDAO</li> <li><code>rocketNetworkBalances</code> - Handles network balance updates from watchtower nodes</li> <li><code>rocketNetworkFees</code> - Calculates node commission rates based on network node demand</li> <li><code>rocketNetworkPrices</code> - Handles RPL price and effective stake updates from watchtower nodes</li> <li><code>rocketNetworkWithdrawal</code> - Handles processing of beacon chain validator withdrawals</li> <li><code>rocketRewardsPool</code> - Handles the distribution of rewards to each rewards contract</li> <li><code>rocketClaimDAO</code> - Handles the claiming of rewards for the pDAO</li> <li><code>rocketClaimNode</code> - Handles the claiming of rewards for node operators</li> <li><code>rocketClaimTrustedNode</code> - Handles the claiming of rewards for the oDAO</li> <li><code>rocketNodeDeposit</code> - Handles node deposits for minipool creation</li> <li><code>rocketNodeManager</code> - Registers &amp; manages all nodes in the network</li> <li><code>rocketNodeStaking</code> - Handles node staking and unstaking</li> <li><code>rocketDAOProposal</code> - Contains common oDAO and pDAO functionality</li> <li><code>rocketDAONodeTrusted</code> - Handles oDAO related proposals</li> <li><code>rocketDAONodeTrustedProposals</code> - Contains oDAO proposal functionality (internal)</li> <li><code>rocketDAONodeTrustedActions</code> - Contains oDAO action functionality (internal)</li> <li><code>rocketDAONodeTrustedUpgrade</code> - Handles oDAO contract upgrade functionality (internal)</li> <li><code>rocketDAONodeTrustedSettingsMembers</code> - Handles settings relating to trusted members</li> <li><code>rocketDAONodeTrustedSettingsProposals</code> - Handles settings relating to proposals</li> <li><code>rocketDAONodeTrustedSettingsMinipool</code> - Handles settings relating to minipools</li> <li><code>rocketDAOProtocol</code> - Handles pDAO related proposals</li> <li><code>rocketDAOProtocolProposals</code> - Handles pDAO proposal functionality (internal)</li> <li><code>rocketDAOProtocolActions</code> - Handles pDAO action functionality (internal)</li> <li><code>rocketDAOProtocolSettingsInflation</code> - Handles settings related to inflation</li> <li><code>rocketDAOProtocolSettingsRewards</code> - Handles settings related to rewards</li> <li><code>rocketDAOProtocolSettingsAuction</code> - Handles settings related to auction system</li> <li><code>rocketDAOProtocolSettingsNode</code> - Handles settings related to node operators</li> <li><code>rocketDAOProtocolSettingsNetwork</code> - Handles settings related to the network</li> <li><code>rocketDAOProtocolSettingsDeposit</code> - Handles settings related to deposits</li> <li><code>rocketDAOProtocolSettingsMinipool</code> - Handles settings related to minipools</li> <li><code>rocketTokenRETH</code> - The rETH token contract (not upgradeable)</li> <li><code>rocketTokenRPL</code> - The RPL token contract (not upgradeable)</li> <li><code>addressQueueStorage</code> - A utility contract (internal)</li> <li><code>addressSetStorage</code> - A utility contract (internal)</li></ul> <p>Contracts marked as “internal” do not provide methods which are accessible to the general public, and so are generally not useful for extension. For information on specific contract methods, consult their interfaces in the <a href="https://github.com/rocket-pool/rocketpool/tree/master/contracts/interface" target="_blank" rel="noopener noreferrer">Rocket Pool repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="deposits"><a href="#deposits" class="header-anchor">#</a> Deposits</h2> <p>The main reason for extending the Rocket Pool network is to implement custom deposit logic which funnels user deposits into the deposit pool. For example, a fund manager may wish to stake their users’ ETH in Rocket Pool via their own smart contracts, and abstract the use of Rocket Pool itself away from their users.</p> <p>Note: the <code>RocketDepositPool</code> contract address should not be hard-coded in your contracts, but retrieved from <code>RocketStorage</code> dynamically. See <a href="#interacting-with-rocket-pool">Interacting With Rocket Pool</a> for more details.</p> <h3 id="implementation"><a href="#implementation" class="header-anchor">#</a> Implementation</h3> <p>The following describes a basic example contract which forwards deposited ETH into Rocket Pool and minted rETH back to the caller:</p> <div class="language-solidity extra-class"><pre class="language-solidity"><code><span class="token keyword">import</span> <span class="token string">&quot;RocketStorageInterface.sol&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;RocketDepositPoolInterface.sol&quot;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token string">&quot;RocketTokenRETHInterface.sol&quot;</span><span class="token punctuation">;</span>

<span class="token keyword">contract</span> <span class="token class-name">Example</span> <span class="token punctuation">{</span>

    RocketStorageInterface rocketStorage <span class="token operator">=</span> <span class="token function">RocketStorageInterface</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token builtin">uint256</span><span class="token punctuation">)</span> balances<span class="token punctuation">;</span>

    <span class="token keyword">constructor</span><span class="token punctuation">(</span><span class="token builtin">address</span> _rocketStorageAddress<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token punctuation">{</span>
        rocketStorage <span class="token operator">=</span> <span class="token function">RocketStorageInterface</span><span class="token punctuation">(</span>_rocketStorageAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token function">deposit</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">payable</span> <span class="token punctuation">{</span>
        <span class="token comment">// Check deposit amount</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>value <span class="token operator">&gt;</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token string">&quot;Invalid deposit amount&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Load contracts</span>
        <span class="token builtin">address</span> rocketDepositPoolAddress <span class="token operator">=</span> rocketStorage<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token function">keccak256</span><span class="token punctuation">(</span>abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span><span class="token string">&quot;contract.address&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rocketDepositPool&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        RocketDepositPoolInterface rocketDepositPool <span class="token operator">=</span> <span class="token function">RocketDepositPoolInterface</span><span class="token punctuation">(</span>rocketDepositPoolAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">address</span> rocketTokenRETHAddress <span class="token operator">=</span> rocketStorage<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token function">keccak256</span><span class="token punctuation">(</span>abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span><span class="token string">&quot;contract.address&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rocketTokenRETH&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        RocketTokenRETHInterface rocketTokenRETH <span class="token operator">=</span> <span class="token function">RocketTokenRETHInterface</span><span class="token punctuation">(</span>rocketTokenRETHAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Forward deposit to RP &amp; get amount of rETH minted</span>
        <span class="token builtin">uint256</span> rethBalance1 <span class="token operator">=</span> rocketTokenRETH<span class="token punctuation">.</span><span class="token function">balanceOf</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        rocketDepositPool<span class="token punctuation">.</span>deposit<span class="token punctuation">{</span>value<span class="token punctuation">:</span> msg<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">uint256</span> rethBalance2 <span class="token operator">=</span> rocketTokenRETH<span class="token punctuation">.</span><span class="token function">balanceOf</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>rethBalance2 <span class="token operator">&gt;</span> rethBalance1<span class="token punctuation">,</span> <span class="token string">&quot;No rETH was minted&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token builtin">uint256</span> rethMinted <span class="token operator">=</span> rethBalance2 <span class="token operator">-</span> rethBalance1<span class="token punctuation">;</span>
        <span class="token comment">// Update user's balance</span>
        balances<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span> <span class="token operator">+=</span> rethMinted<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token comment">// After 24 hours it's possible to transfer the tokens</span>
    <span class="token function">withdraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span>
        <span class="token comment">// Load contracts</span>
        <span class="token builtin">address</span> rocketTokenRETHAddress <span class="token operator">=</span> rocketStorage<span class="token punctuation">.</span><span class="token function">getAddress</span><span class="token punctuation">(</span><span class="token function">keccak256</span><span class="token punctuation">(</span>abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span><span class="token string">&quot;contract.address&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;rocketTokenRETH&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        RocketTokenRETHInterface rocketTokenRETH <span class="token operator">=</span> <span class="token function">RocketTokenRETHInterface</span><span class="token punctuation">(</span>rocketTokenRETHAddress<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// Transfer rETH to caller</span>
        <span class="token builtin">uint256</span> balance <span class="token operator">=</span> balances<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span><span class="token punctuation">;</span>
        balances<span class="token punctuation">[</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span>rocketTokenRETH<span class="token punctuation">.</span><span class="token function">transfer</span><span class="token punctuation">(</span>msg<span class="token punctuation">.</span>sender<span class="token punctuation">,</span> balance<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;rETH was not transferred to caller&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/rocket-pool/docs.rocketpool.net/edit/main/src/developers/usage/contracts/contracts.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/developers/" class="prev router-link-active">
        Developer Documentation
      </a></span> <span class="next"><a href="/developers/usage/go/go.html">
        [WIP] Go Library
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.77a1a73f.js" defer></script><script src="/assets/js/3.59e072af.js" defer></script><script src="/assets/js/94.6cf1cf9d.js" defer></script>
  </body>
</html>
